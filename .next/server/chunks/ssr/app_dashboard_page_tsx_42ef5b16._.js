module.exports=[20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(71987),f=a.i(38246);function g(){let a,g,h,i=(0,d.useRouter)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({player2Id:"",matchDate:new Date().toISOString().split("T")[0],sets:[{player1Score:"",player2Score:""},{player1Score:"",player2Score:""}]}),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null);(0,c.useEffect)(()=>{fetch("/api/auth/me").then(a=>a.json()).then(a=>{a.player?(k(a.player),F(),G(a.player.id),H()):i.push("/login"),m(!1)}).catch(()=>{m(!1),i.push("/login")})},[i]);let F=async()=>{try{let a=await fetch("/api/matches"),b=await a.json();a.ok&&o(b.matches||[])}catch(a){console.error("Erreur lors du chargement des matchs:",a)}},G=async a=>{try{let b=await fetch("/api/players/list"),c=await b.json();if(b.ok){let b=(c.players||[]).filter(b=>b.id!==a);q(b)}}catch(a){console.error("Erreur lors du chargement des joueurs:",a)}},H=async()=>{try{let a=await fetch("/api/ranking"),b=await a.json();a.ok&&E(b)}catch(a){console.error("Erreur lors du chargement du classement:",a)}},I=async a=>{a.preventDefault(),A(""),y(!0);try{let a=parseInt(t.player2Id),b=v&&t.sets[2]?.player1Score&&t.sets[2]?.player2Score?t.sets.slice(0,3):t.sets.slice(0,2);if(!b.every(a=>a.player1Score&&a.player2Score)){A("Tous les sets doivent avoir des scores"),y(!1);return}let c=null!==B,d=c?`/api/matches/${B}`:"/api/matches",e=await fetch(d,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({player2Id:a,matchDate:t.matchDate,sets:b.map(a=>({player1Score:parseInt(a.player1Score),player2Score:parseInt(a.player2Score)}))})}),f=await e.json();if(!e.ok){A(f.error||"Une erreur est survenue"),y(!1);return}u({player2Id:"",matchDate:new Date().toISOString().split("T")[0],sets:[{player1Score:"",player2Score:""},{player1Score:"",player2Score:""}]}),w(!1),s(!1),C(null),await F(),await H(),y(!1)}catch(a){A(null!==B?"Une erreur est survenue lors de la modification du match":"Une erreur est survenue lors de la crÃ©ation du match"),y(!1)}},J=(a,b)=>{if(a<0||b<0)return null;let c=Math.max(a,b),d=Math.min(a,b),e=Math.abs(a-b);if(c>30)return"Le score maximum est 30 points";if(c<21)return"Un set se gagne Ã  21 points minimum";if(30===c){if(d<28||d>29||e<1||e>2)return"Ã€ 30 points, le score doit Ãªtre 30-29 ou 30-28"}else if(21===c){if(d>=19&&2!==e)return"Si les deux joueurs sont Ã  au moins 19 points, il faut exactement 2 points d'Ã©cart";if(d<19&&e<2)return"Il faut au moins 2 points d'Ã©cart pour gagner"}else if(c>=22&&c<=29){if(2!==e)return"Au-dessus de 21 points, il faut exactement 2 points d'Ã©cart (les deux joueurs Ã©taient Ã  au moins 19)";if(d<19)return"Si on dÃ©passe 21 points, le perdant doit avoir au moins 19 points"}return null},K=(a,b,c)=>{if(""!==c&&"-"!==c){let a=parseInt(c);if(!isNaN(a)&&a<0)return}let d=[...t.sets];if(d[a]||(d[a]={player1Score:"",player2Score:""}),d[a][b]=c,u({...t,sets:d}),1===a&&d[0].player1Score&&d[0].player2Score&&d[1].player1Score&&d[1].player2Score){let a=parseInt(d[0].player1Score),b=parseInt(d[0].player2Score),c=parseInt(d[1].player1Score),e=parseInt(d[1].player2Score);isNaN(a)||isNaN(b)||isNaN(c)||isNaN(e)||((a>b?1:2)!=(c>e?1:2)?!v&&(w(!0),d.length<3&&(d.push({player1Score:"",player2Score:""}),u({...t,sets:d}))):w(!1))}},L=async()=>{await fetch("/api/auth/logout",{method:"POST"}),i.push("/")};return l?(0,b.jsx)("main",{className:"min-h-screen bg-slate-900 text-slate-50 flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-slate-400",children:"Chargement..."})}):j?(0,b.jsxs)("main",{className:"min-h-screen bg-slate-900 text-slate-50 flex flex-col",children:[(0,b.jsxs)("header",{className:"px-4 pt-10 pb-4 sm:px-6 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"shrink-0",children:(0,b.jsx)(e.default,{src:"/bap-logo.png",alt:"Logo du club Bad' Ã  Paname",width:56,height:56,className:"rounded-xl shadow-md",priority:!0})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Ligue du BAP"}),(0,b.jsxs)("p",{className:"mt-1 text-sm text-slate-300 max-w-md",children:["Bienvenue, ",j.nickname," !"]})]}),(0,b.jsx)("button",{onClick:L,className:"px-4 py-2 text-sm text-slate-400 hover:text-slate-200 transition",children:"DÃ©connexion"})]}),(0,b.jsx)("section",{className:"px-4 sm:px-6 mt-4 flex-1",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[D&&(0,b.jsxs)("div",{className:"bg-slate-800/60 border border-slate-700 rounded-2xl p-6 shadow-lg",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Classement GÃ©nÃ©ral"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:"1 victoire = 1 point â€¢ 1 dÃ©faite = 0 point"}),0===D.generalRanking.length?(0,b.jsx)("div",{className:"text-slate-400 text-center py-4",children:"Aucun match jouÃ© encore"}):(0,b.jsx)("div",{className:"space-y-2 mb-6",children:D.generalRanking.map((a,c)=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg ${0===c?"bg-yellow-500/20 border border-yellow-500/30":1===c?"bg-slate-700/50 border border-slate-600":2===c?"bg-amber-600/20 border border-amber-600/30":"bg-slate-700/30 border border-slate-700"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 text-center font-bold text-slate-300",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-medium text-slate-100",children:[a.nickname,0===c&&D.maillots.jaune&&(0,b.jsx)("span",{className:"ml-2 text-yellow-400",children:"ðŸ†"})]}),(0,b.jsxs)("div",{className:"text-xs text-slate-400",children:[a.wins,"V - ",a.losses,"D"]})]})]}),(0,b.jsxs)("div",{className:"text-lg font-semibold text-emerald-400",children:[a.points," pt",a.points>1?"s":""]})]},a.playerId))}),(0,b.jsxs)("div",{className:"pt-6 border-t border-slate-700",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Maillots du mois"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",fill:"#EAB308",stroke:"#FCD34D",strokeWidth:"1.5",children:(0,b.jsx)("path",{d:"M44 12.09c3.92 1.62 12 12 12 12l-8 8-4-4v24H20v-24l-4 4-8-8s8.08-10.38 12-12c.92-.39 4 0 4 0 0 4 4 8 8 8s8-4 8-8c0 0 3.08-.39 4 0z"})}),(0,b.jsx)("h4",{className:"font-semibold text-yellow-400",children:"Maillot Jaune"})]}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"1er au classement gÃ©nÃ©ral"}),D.maillots.jaune?(0,b.jsxs)("div",{className:"text-slate-100 font-medium",children:[D.maillots.jaune.nickname,(0,b.jsxs)("span",{className:"text-sm text-slate-400 ml-2",children:["(",D.maillots.jaune.points," pts)"]})]}):(0,b.jsx)("div",{className:"text-slate-500 text-sm",children:"Aucun"})]}),(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("defs",{children:(0,b.jsx)("clipPath",{id:"shirt-clip",children:(0,b.jsx)("path",{d:"M44 12.09c3.92 1.62 12 12 12 12l-8 8-4-4v24H20v-24l-4 4-8-8s8.08-10.38 12-12c.92-.39 4 0 4 0 0 4 4 8 8 8s8-4 8-8c0 0 3.08-.39 4 0z"})})}),(0,b.jsx)("path",{d:"M44 12.09c3.92 1.62 12 12 12 12l-8 8-4-4v24H20v-24l-4 4-8-8s8.08-10.38 12-12c.92-.39 4 0 4 0 0 4 4 8 8 8s8-4 8-8c0 0 3.08-.39 4 0z",fill:"#FFFFFF",stroke:"#DC2626",strokeWidth:"1.5"}),(0,b.jsxs)("g",{clipPath:"url(#shirt-clip)",children:[(0,b.jsx)("circle",{cx:"22",cy:"24",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"32",cy:"24",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"42",cy:"24",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"27",cy:"30",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"37",cy:"30",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"22",cy:"36",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"32",cy:"36",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"42",cy:"36",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"27",cy:"42",r:"2",fill:"#DC2626"}),(0,b.jsx)("circle",{cx:"37",cy:"42",r:"2",fill:"#DC2626"})]})]}),(0,b.jsx)("h4",{className:"font-semibold text-red-400",children:"Maillot Ã  Pois"})]}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"Plus de victoires contre mieux classÃ©s (dÃ©but du mois)"}),D.maillots.points?(0,b.jsxs)("div",{className:"text-slate-100 font-medium",children:[D.maillots.points.nickname,(0,b.jsxs)("span",{className:"text-sm text-slate-400 ml-2",children:["(",D.maillots.points.count??0," victoire",(D.maillots.points.count??0)>1?"s":"",")"]})]}):(0,b.jsx)("div",{className:"text-slate-500 text-sm",children:"Aucun"})]}),(0,b.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",fill:"#22C55E",stroke:"#4ADE80",strokeWidth:"1.5",children:(0,b.jsx)("path",{d:"M44 12.09c3.92 1.62 12 12 12 12l-8 8-4-4v24H20v-24l-4 4-8-8s8.08-10.38 12-12c.92-.39 4 0 4 0 0 4 4 8 8 8s8-4 8-8c0 0 3.08-.39 4 0z"})}),(0,b.jsx)("h4",{className:"font-semibold text-green-400",children:"Maillot Vert"})]}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"Plus de victoires la derniÃ¨re semaine du mois"}),D.maillots.vert?(0,b.jsxs)("div",{className:"text-slate-100 font-medium",children:[D.maillots.vert.nickname,(0,b.jsxs)("span",{className:"text-sm text-slate-400 ml-2",children:["(",D.maillots.vert.wins??0," victoire",(D.maillots.vert.wins??0)>1?"s":"",")"]})]}):(0,b.jsx)("div",{className:"text-slate-500 text-sm",children:"Aucun"})]}),(0,b.jsxs)("div",{className:"bg-slate-600/30 border border-slate-500/50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",fill:"#E2E8F0",stroke:"#F1F5F9",strokeWidth:"1.5",children:(0,b.jsx)("path",{d:"M44 12.09c3.92 1.62 12 12 12 12l-8 8-4-4v24H20v-24l-4 4-8-8s8.08-10.38 12-12c.92-.39 4 0 4 0 0 4 4 8 8 8s8-4 8-8c0 0 3.08-.39 4 0z"})}),(0,b.jsx)("h4",{className:"font-semibold text-slate-300",children:"Maillot du plus combatif"})]}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"Plus de matchs jouÃ©s ce mois"}),D.maillots.blanc?(0,b.jsxs)("div",{className:"text-slate-100 font-medium",children:[D.maillots.blanc.nickname,(0,b.jsxs)("span",{className:"text-sm text-slate-400 ml-2",children:["(",D.maillots.blanc.matchCount??0," match",(D.maillots.blanc.matchCount??0)>1?"s":"",")"]})]}):(0,b.jsx)("div",{className:"text-slate-500 text-sm",children:"Aucun"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/60 border border-slate-700 rounded-2xl p-6 shadow-lg",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Classement Simple"}),null!==j.singleRankingPoints?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"bg-emerald-500/20 text-emerald-400 rounded-lg px-4 py-3 font-semibold text-xl",children:j.singleRankingPoints}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-slate-200 font-medium",children:"Points"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Classement FFBaD"})]})]})}),(0,b.jsx)("div",{className:"pt-3 border-t border-slate-700",children:(0,b.jsx)("a",{href:`https://www.myffbad.fr/joueur/${j.licenseNumber}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-emerald-400 hover:text-emerald-300 inline-flex items-center gap-1",children:"Voir sur myffbad.fr â†’"})})]}):(0,b.jsxs)("div",{className:"text-slate-400",children:[(0,b.jsx)("p",{children:"Classement non disponible"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Le classement n'a pas pu Ãªtre rÃ©cupÃ©rÃ© automatiquement."}),(0,b.jsx)("button",{onClick:async()=>{try{let a=await fetch("/api/players/update-ranking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseNumber:j.licenseNumber})}),b=await a.json();b.success?window.location.reload():alert("Erreur lors de la mise Ã  jour: "+(b.error||"Erreur inconnue"))}catch(a){alert("Erreur lors de la mise Ã  jour du classement")}},className:"mt-3 px-4 py-2 bg-emerald-500/20 text-emerald-400 rounded-lg hover:bg-emerald-500/30 transition text-sm",children:"Essayer de mettre Ã  jour"})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/60 border border-slate-700 rounded-2xl p-6 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Mes matchs"}),(0,b.jsx)("button",{onClick:()=>{r?(u({player2Id:"",matchDate:new Date().toISOString().split("T")[0],sets:[{player1Score:"",player2Score:""},{player1Score:"",player2Score:""}]}),w(!1),s(!1),C(null),A("")):s(!0)},className:"px-4 py-2 bg-emerald-500 text-slate-900 font-medium rounded-lg hover:bg-emerald-400 transition text-sm",children:r?"Annuler":"+ Nouveau match"})]}),r&&(0,b.jsxs)("form",{onSubmit:I,className:"mb-6 space-y-4 p-4 bg-slate-700/50 rounded-lg",children:[z&&(0,b.jsx)("div",{className:"text-red-400 text-sm bg-red-500/20 border border-red-500/50 rounded-lg p-3",children:z}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Adversaire"}),0===p.length?(0,b.jsx)("div",{className:"bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 text-slate-400 text-sm",children:"Aucun adversaire disponible. Demandez Ã  d'autres joueurs de s'inscrire !"}):(0,b.jsxs)("select",{value:t.player2Id,onChange:a=>u({...t,player2Id:a.target.value}),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0,children:[(0,b.jsx)("option",{value:"",children:"SÃ©lectionner un adversaire"}),p.map(a=>(0,b.jsx)("option",{value:a.id,children:a.nickname},a.id))]})]}),(0,b.jsxs)("div",{className:"bg-slate-700/30 border border-slate-600 rounded-lg p-3 text-xs text-slate-400",children:[(0,b.jsx)("p",{className:"font-medium text-slate-300 mb-1",children:"RÃ¨gles du badminton :"}),(0,b.jsx)("p",{children:"â€¢ Set gagnÃ© Ã  21 points"}),(0,b.jsx)("p",{children:"â€¢ Si les deux joueurs sont Ã  au moins 19 points, il faut 2 points d'Ã©cart"}),(0,b.jsx)("p",{children:"â€¢ Sinon, au moins 2 points d'Ã©cart (21-3, 21-8, etc.)"}),(0,b.jsx)("p",{children:"â€¢ Maximum 30 points (30-29 ou 30-28)"}),(0,b.jsx)("p",{children:"â€¢ Exemples : 21-3, 21-8, 21-19, 22-20, 28-26, 30-29, 30-28"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Set 1 - Scores"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Vous",value:t.sets[0]?.player1Score||"",onChange:a=>K(0,"player1Score",a.target.value),onKeyDown:a=>{/^\d$/.test(a.key)||["Backspace","Delete","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)||a.ctrlKey&&("a"===a.key||"c"===a.key||"v"===a.key||"x"===a.key)||a.preventDefault()},onPaste:a=>{a.preventDefault();let b=a.clipboardData.getData("text");/^\d+$/.test(b)&&K(0,"player1Score",b)},className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0})}),(0,b.jsx)("span",{className:"text-slate-400",children:"-"}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Adversaire",value:t.sets[0]?.player2Score||"",onChange:a=>K(0,"player2Score",a.target.value),onKeyDown:a=>{/^\d$/.test(a.key)||["Backspace","Delete","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)||a.ctrlKey&&("a"===a.key||"c"===a.key||"v"===a.key||"x"===a.key)||a.preventDefault()},onPaste:a=>{a.preventDefault();let b=a.clipboardData.getData("text");/^\d+$/.test(b)&&K(0,"player2Score",b)},className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0})})]}),t.sets[0]?.player1Score&&t.sets[0]?.player2Score&&((a=J(parseInt(t.sets[0].player1Score),parseInt(t.sets[0].player2Score)))?(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:a}):null)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Set 2 - Scores"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Vous",value:t.sets[1]?.player1Score||"",onChange:a=>K(1,"player1Score",a.target.value),onKeyDown:a=>{/^\d$/.test(a.key)||["Backspace","Delete","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)||a.ctrlKey&&("a"===a.key||"c"===a.key||"v"===a.key||"x"===a.key)||a.preventDefault()},onPaste:a=>{a.preventDefault();let b=a.clipboardData.getData("text");/^\d+$/.test(b)&&K(1,"player1Score",b)},className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0})}),(0,b.jsx)("span",{className:"text-slate-400",children:"-"}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Adversaire",value:t.sets[1]?.player2Score||"",onChange:a=>K(1,"player2Score",a.target.value),onKeyDown:a=>{/^\d$/.test(a.key)||["Backspace","Delete","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)||a.ctrlKey&&("a"===a.key||"c"===a.key||"v"===a.key||"x"===a.key)||a.preventDefault()},onPaste:a=>{a.preventDefault();let b=a.clipboardData.getData("text");/^\d+$/.test(b)&&K(1,"player2Score",b)},className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0})})]}),t.sets[1]?.player1Score&&t.sets[1]?.player2Score&&((g=J(parseInt(t.sets[1].player1Score),parseInt(t.sets[1].player2Score)))?(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:g}):null)]}),v&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Set 3 - Scores (match dÃ©cisif)"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Vous",value:t.sets[2]?.player1Score||"",onChange:a=>K(2,"player1Score",a.target.value),onKeyDown:a=>{/^\d$/.test(a.key)||["Backspace","Delete","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)||a.ctrlKey&&("a"===a.key||"c"===a.key||"v"===a.key||"x"===a.key)||a.preventDefault()},onPaste:a=>{a.preventDefault();let b=a.clipboardData.getData("text");/^\d+$/.test(b)&&K(2,"player1Score",b)},className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:v})}),(0,b.jsx)("span",{className:"text-slate-400",children:"-"}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Adversaire",value:t.sets[2]?.player2Score||"",onChange:a=>K(2,"player2Score",a.target.value),onKeyDown:a=>{/^\d$/.test(a.key)||["Backspace","Delete","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)||a.ctrlKey&&("a"===a.key||"c"===a.key||"v"===a.key||"x"===a.key)||a.preventDefault()},onPaste:a=>{a.preventDefault();let b=a.clipboardData.getData("text");/^\d+$/.test(b)&&K(2,"player2Score",b)},className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:v})})]}),t.sets[2]?.player1Score&&t.sets[2]?.player2Score&&((h=J(parseInt(t.sets[2].player1Score),parseInt(t.sets[2].player2Score)))?(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:h}):null)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Date du match"}),(0,b.jsx)("input",{type:"date",value:t.matchDate,onChange:a=>u({...t,matchDate:a.target.value}),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0})]}),(0,b.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-emerald-500 text-slate-900 font-semibold py-2.5 rounded-lg hover:bg-emerald-400 transition disabled:opacity-50 disabled:cursor-not-allowed",children:x?B?"Modification...":"Enregistrement...":B?"Modifier le match":"Enregistrer le match"})]}),0===n.length?(0,b.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,b.jsx)("p",{children:"Aucun match enregistrÃ©"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:r?"Remplissez le formulaire ci-dessus pour enregistrer votre premier match":"Cliquez sur 'Nouveau match' pour commencer"})]}):(0,b.jsx)("div",{className:"space-y-3",children:n.map(a=>{let c=a.player1Id===j?.id,d=c?a.player2:a.player1,e=c?a.player1Sets:a.player2Sets,f=c?a.player2Sets:a.player1Sets,g=2===e,h=new Date(a.matchDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});return(0,b.jsx)("div",{className:`p-4 rounded-lg border ${g?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)("span",{className:"font-semibold text-slate-100",children:[j?.nickname," vs ",d.nickname]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${g?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:g?"Victoire":"DÃ©faite"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-slate-300 mb-2",children:[(0,b.jsxs)("span",{children:["Sets : ",(0,b.jsx)("span",{className:"font-semibold",children:e})," -"," ",(0,b.jsx)("span",{className:"font-semibold",children:f})]}),(0,b.jsx)("span",{className:"text-slate-500",children:"â€¢"}),(0,b.jsx)("span",{children:h})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[null!==a.set1Player1Score&&null!==a.set1Player2Score&&(0,b.jsxs)("span",{children:[c?a.set1Player1Score:a.set1Player2Score,"-",c?a.set1Player2Score:a.set1Player1Score]}),null!==a.set2Player1Score&&null!==a.set2Player2Score&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-slate-500",children:"â€¢"}),(0,b.jsxs)("span",{children:[c?a.set2Player1Score:a.set2Player2Score,"-",c?a.set2Player2Score:a.set2Player1Score]})]}),null!==a.set3Player1Score&&null!==a.set3Player2Score&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-slate-500",children:"â€¢"}),(0,b.jsxs)("span",{children:[c?a.set3Player1Score:a.set3Player2Score,"-",c?a.set3Player2Score:a.set3Player1Score]})]})]})]}),c&&(0,b.jsx)("button",{onClick:()=>{let b,c,d;return c=[{player1Score:(b=a.player1Id===j?.id)?a.set1Player1Score?.toString()||"":a.set1Player2Score?.toString()||"",player2Score:b?a.set1Player2Score?.toString()||"":a.set1Player1Score?.toString()||""},{player1Score:b?a.set2Player1Score?.toString()||"":a.set2Player2Score?.toString()||"",player2Score:b?a.set2Player2Score?.toString()||"":a.set2Player1Score?.toString()||""}],null!==a.set3Player1Score&&null!==a.set3Player2Score?(c.push({player1Score:b?a.set3Player1Score.toString()||"":a.set3Player2Score.toString()||"",player2Score:b?a.set3Player2Score.toString()||"":a.set3Player1Score.toString()||""}),w(!0)):w(!1),d=new Date(a.matchDate).toISOString().split("T")[0],void(u({player2Id:(b?a.player2Id:a.player1Id).toString(),matchDate:d,sets:c}),C(a.id),s(!0),A(""))},className:"ml-4 px-3 py-1.5 text-sm bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition",title:"Modifier le match",children:"Modifier"})]})},a.id)})})]})]})}),(0,b.jsx)("footer",{className:"px-4 sm:px-6 py-4 text-xs text-slate-500 text-center",children:(0,b.jsx)(f.default,{href:"/",className:"text-slate-400 hover:text-slate-300",children:"â† Retour Ã  l'accueil"})})]}):null}a.s(["default",()=>g])}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map